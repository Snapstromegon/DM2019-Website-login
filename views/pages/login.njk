<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <link rel="stylesheet" href="/static/css/login.css" />
    <script defer>
      function updateACLink(elem) {
        const link = document.querySelector('#acLink');
        const wantedId = elem.value.split(' ')[0].slice(1);
        link.href = `${
          link.href.split('/registrants/')[0]
        }/registrants/${wantedId}`;
      }
    </script>
  </head>
  <body>
    <main>
        <div class="devider">
            <div class="devider-blue"></div>
            <div class="devider-red"></div>
            <div class="devider-yellow"></div>
          </div>
      <h1>Freestyle DM 2019 Login</h1>

      <p>
        Unter
        <a href="https://anmeldung.freestyledm2019.de"
          >anmeldung.freestyledm2019.de</a
        >
        findest du unter<br />
        "Meine Anmeldungen"<br />
        > "Zusammenfassung ansehen" <br />
        deinen "Access Code".
      </p>
      <p>Diesen verwendest du hier bitte als Passwort.</p>

      {% if failedLogin %}
      <p class="error">
        Name oder Passwort falsch!
      </p>
      {% endif %}

      <form action="" method="post">
        <label for="name">Name:</label>
        <input
          type="search"
          name="registrant[name]"
          id="name"
          list="registrantnames"
          oninput="updateACLink(this)"
        />
        <datalist id="registrantnames">
          {% for registrant in registrants %}
          <option>#{{ registrant.iufId }} {{ registrant.name }}</option>
          {% endfor %}
        </datalist>
        <p>
          <a
            id="acLink"
            href="https://anmeldung.freestyledm2019.de/"
            target="_blank"
            >Link zum Accesscode</a
          >
        </p>
        <label for="password">Password:</label>
        <input id="password" type="password" name="registrant[password]" />
        <label for="loginType">Login Typ:</label>
        <select id="loginType" name="loginType">
          <option>Registrant</option>
          <option>Admin</option>
        </select>
        <input type="submit" value="Login" />
      </form>
    </main>
  </body>
</html>
